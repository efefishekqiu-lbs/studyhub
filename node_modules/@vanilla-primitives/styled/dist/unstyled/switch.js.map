{"version":3,"file":"switch.js","sources":["../../src/unstyled/switch.js"],"sourcesContent":["export class Switch extends HTMLElement {\n    connectedCallback() {\n        const checked = this.hasAttribute('checked');\n        const disabled = this.hasAttribute('disabled');\n        const userClass = this.getAttribute('class') || '';\n\n        // Create the switch element\n        const switchElement = document.createElement('button');\n\n        // Set attributes and classes\n        switchElement.setAttribute('type', 'button');\n        switchElement.setAttribute('role', 'switch');\n        switchElement.setAttribute('aria-checked', checked);\n        switchElement.setAttribute('data-state', checked ? 'checked' : 'unchecked');\n        switchElement.setAttribute('value', checked ? 'on' : 'off');\n        switchElement.className = userClass\n\n        // Pass all attributes from the custom element to the button\n        for (const attr of this.attributes) {\n            if (\n                attr.name !== 'class' &&\n                attr.name !== 'checked' &&\n                attr.name !== 'disabled'\n            ) {\n                switchElement.setAttribute(attr.name, attr.value);\n            }\n        }\n\n        // Create and append the thumb element\n        const thumbElement = document.createElement('span');\n        thumbElement.className = 'pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0';\n        switchElement.appendChild(thumbElement);\n\n        // Set disabled state if necessary\n        if (disabled) {\n            switchElement.setAttribute('aria-disabled', 'true');\n            switchElement.disabled = true;\n        }\n\n        // Add event listeners\n        switchElement.addEventListener('click', this.toggle.bind(this));\n        switchElement.addEventListener('keydown', this.handleKeyDown.bind(this));\n\n        // Store references\n        this.switchBtn = switchElement;\n        this.switchThumb = thumbElement;\n\n        // Replace the custom element with the newly created switch\n        this.replaceWith(switchElement);\n\n        // Update thumb position\n        this.updateThumbPosition();\n    }\n\n    toggle() {\n        if (this.switchBtn.disabled) return;\n\n        const isChecked = this.switchBtn.getAttribute('aria-checked') === 'true';\n        this.switchBtn.setAttribute('aria-checked', !isChecked);\n        this.switchBtn.setAttribute(\n            'data-state',\n            isChecked ? 'unchecked' : 'checked',\n        );\n        this.switchBtn.value = isChecked ? 'off' : 'on';\n        this.updateThumbPosition();\n        this.dispatchEvent(\n            new CustomEvent('change', { detail: { checked: !isChecked } }),\n        );\n    }\n\n    handleKeyDown(event) {\n        if (event.key === ' ' || event.key === 'Enter') {\n            event.preventDefault();\n            this.toggle();\n        }\n    }\n\n    updateThumbPosition() {\n        const isChecked = this.switchBtn.getAttribute('aria-checked') === 'true';\n        this.switchThumb.setAttribute('data-state', isChecked ? 'checked' : 'unchecked');\n    }\n\n    static get observedAttributes() {\n        return ['checked', 'disabled'];\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        if (!this.switchBtn) return;\n\n        if (name === 'checked') {\n            const isChecked = newValue !== null;\n            this.switchBtn.setAttribute('aria-checked', isChecked);\n            this.switchBtn.setAttribute(\n                'data-state',\n                isChecked ? 'checked' : 'unchecked',\n            );\n            this.switchBtn.value = isChecked ? 'on' : 'off';\n            this.updateThumbPosition();\n        } else if (name === 'disabled') {\n            const isDisabled = newValue !== null;\n            this.switchBtn.setAttribute('aria-disabled', isDisabled);\n            this.switchBtn.disabled = isDisabled;\n        }\n    }\n}"],"names":["Switch","_classCallCheck","_callSuper","this","arguments","_inherits","_wrapNativeSuper","HTMLElement","key","get","value","checked","hasAttribute","disabled","userClass","getAttribute","switchElement","document","createElement","setAttribute","className","_step","_iterator","_createForOfIteratorHelper","attributes","s","n","done","attr","name","err","e","f","thumbElement","appendChild","addEventListener","toggle","bind","handleKeyDown","switchBtn","switchThumb","replaceWith","updateThumbPosition","isChecked","dispatchEvent","CustomEvent","detail","event","preventDefault","oldValue","newValue","isDisabled"],"mappings":"s8FAAaA,IAAAA,aAAM,SAAAA,IAAA,mGAAAC,MAAAD,GAAAE,EAAAC,KAAAH,EAAAI,UAAA,CAAA,4RAAAC,CAAAL,EAoFdM,EApFuBC,gBAATP,IAuGd,CAAA,CAAAQ,IAAA,qBAAAC,IArBD,WACI,MAAO,CAAC,UAAW,WACvB,OApFe,CAAA,CAAAD,IAAA,oBAAAE,MACf,WACI,IAAMC,EAAUR,KAAKS,aAAa,WAC5BC,EAAWV,KAAKS,aAAa,YAC7BE,EAAYX,KAAKY,aAAa,UAAY,GAG1CC,EAAgBC,SAASC,cAAc,UAG7CF,EAAcG,aAAa,OAAQ,UACnCH,EAAcG,aAAa,OAAQ,UACnCH,EAAcG,aAAa,eAAgBR,GAC3CK,EAAcG,aAAa,aAAcR,EAAU,UAAY,aAC/DK,EAAcG,aAAa,QAASR,EAAU,KAAO,OACrDK,EAAcI,UAAYN,EAE1B,IACkCO,EADlCC,EAAAC,EACmBpB,KAAKqB,YAAU,IAAlC,IAAAF,EAAAG,MAAAJ,EAAAC,EAAAI,KAAAC,MAAoC,CAAA,IAAzBC,EAAIP,EAAAX,MAEO,UAAdkB,EAAKC,MACS,YAAdD,EAAKC,MACS,aAAdD,EAAKC,MAELb,EAAcG,aAAaS,EAAKC,KAAMD,EAAKlB,MAEnD,CAEA,CAAA,MAAAoB,GAAAR,EAAAS,EAAAD,EAAA,CAAA,QAAAR,EAAAU,GAAA,CACA,IAAMC,EAAehB,SAASC,cAAc,QAC5Ce,EAAab,UAAY,6KACzBJ,EAAckB,YAAYD,GAGtBpB,IACAG,EAAcG,aAAa,gBAAiB,QAC5CH,EAAcH,UAAW,GAI7BG,EAAcmB,iBAAiB,QAAShC,KAAKiC,OAAOC,KAAKlC,OACzDa,EAAcmB,iBAAiB,UAAWhC,KAAKmC,cAAcD,KAAKlC,OAGlEA,KAAKoC,UAAYvB,EACjBb,KAAKqC,YAAcP,EAGnB9B,KAAKsC,YAAYzB,GAGjBb,KAAKuC,qBACT,GAAC,CAAAlC,IAAA,SAAAE,MAED,WACI,IAAIP,KAAKoC,UAAU1B,SAAnB,CAEA,IAAM8B,EAA4D,SAAhDxC,KAAKoC,UAAUxB,aAAa,gBAC9CZ,KAAKoC,UAAUpB,aAAa,gBAAiBwB,GAC7CxC,KAAKoC,UAAUpB,aACX,aACAwB,EAAY,YAAc,WAE9BxC,KAAKoC,UAAU7B,MAAQiC,EAAY,MAAQ,KAC3CxC,KAAKuC,sBACLvC,KAAKyC,cACD,IAAIC,YAAY,SAAU,CAAEC,OAAQ,CAAEnC,SAAUgC,KAXvB,CAajC,GAAC,CAAAnC,IAAA,gBAAAE,MAED,SAAcqC,GACQ,MAAdA,EAAMvC,KAA6B,UAAduC,EAAMvC,MAC3BuC,EAAMC,iBACN7C,KAAKiC,SAEb,GAAC,CAAA5B,IAAA,sBAAAE,MAED,WACI,IAAMiC,EAA4D,SAAhDxC,KAAKoC,UAAUxB,aAAa,gBAC9CZ,KAAKqC,YAAYrB,aAAa,aAAcwB,EAAY,UAAY,YACxE,GAAC,CAAAnC,IAAA,2BAAAE,MAMD,SAAyBmB,EAAMoB,EAAUC,GACrC,GAAK/C,KAAKoC,UAEV,GAAa,YAATV,EAAoB,CACpB,IAAMc,EAAyB,OAAbO,EAClB/C,KAAKoC,UAAUpB,aAAa,eAAgBwB,GAC5CxC,KAAKoC,UAAUpB,aACX,aACAwB,EAAY,UAAY,aAE5BxC,KAAKoC,UAAU7B,MAAQiC,EAAY,KAAO,MAC1CxC,KAAKuC,qBACT,MAAO,GAAa,aAATb,EAAqB,CAC5B,IAAMsB,EAA0B,OAAbD,EACnB/C,KAAKoC,UAAUpB,aAAa,gBAAiBgC,GAC7ChD,KAAKoC,UAAU1B,SAAWsC,CAC9B,CACJ,+FAnBC"}