!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).VanillaPrimitivesCore={})}(this,(function(t){"use strict";class e{constructor(t,e={}){this.root=t,this.dialog=this.root,this.cancelButton=this.root.querySelector("[data-dialog-cancel]"),this.title=this.root.querySelector("[data-dialog-title]"),this.description=this.root.querySelector("[data-dialog-description]"),this.isAnimating=!1,this.options=e,this.setupAccessibility(),this.setupEventListeners(),this.attachCustomMethods()}generateId(t){return`${t}-${Math.random().toString(36).slice(2,11)}`}attachCustomMethods(){this.originalCloseModal=this.dialog.close,this.originalShowModal=this.dialog.showModal,this.dialog.close=()=>this.close(),this.dialog.showModal=()=>this.open()}setAriaAttributes(t,e){t&&Object.entries(e).forEach((([e,s])=>t.setAttribute(e,s)))}setupAccessibility(){const{dialog:t,title:e,description:s,options:i}=this;this.setAriaAttributes(t,{role:i.isAlert?"alertdialog":"dialog","aria-modal":"true","aria-labelledby":e?this.generateId("dialog-title"):"","aria-describedby":s?this.generateId("dialog-description"):""}),e?e.id=t.getAttribute("aria-labelledby")||"":console.warn("Dialog is missing a title for accessibility."),s?s.id=t.getAttribute("aria-describedby")||"":console.warn("Dialog is missing a description for accessibility.")}setupEventListeners(){this.cancelButton?.addEventListener("click",(()=>this.close())),this.dialog?.addEventListener("keydown",(t=>{"Escape"===t.key&&(t.preventDefault(),this.close())}));this.dialog.querySelectorAll("form").forEach((t=>{t.addEventListener("submit",(e=>{"dialog"===t.method&&(e.preventDefault(),this.close())}))}))}open(){if(this.isAnimating)return;this.originalShowModal.call(this.dialog),this.setAriaAttributes(this.dialog,{"data-state":"open"}),document.body.style.overflow="hidden";const t=window.getComputedStyle(this.dialog);if("none"!==t.animationName&&"none"!==t.display){this.isAnimating=!0;const t=()=>{this.isAnimating=!1,this.dialog.removeEventListener("animationend",t)};this.dialog.addEventListener("animationend",t)}}close(){if(this.isAnimating)return;this.setAriaAttributes(this.dialog,{"data-state":"closed"});const t=window.getComputedStyle(this.dialog);if("none"!==t.animationName&&"none"!==t.display){this.isAnimating=!0;const t=()=>{this.finishClosing(),this.isAnimating=!1,this.dialog.removeEventListener("animationend",t)};this.dialog.addEventListener("animationend",t)}else this.finishClosing()}finishClosing(){this.originalCloseModal.call(this.dialog),document.body.style.overflow=""}}const s={AlertDialog:{selector:"[data-alert-dialog]",Component:e,options:{isAlert:!0}},Calendar:{selector:"[data-calendar]",Component:class{constructor(t,e={}){this.container=t,this.date=new Date,this.options={showOutsideDays:!0,...e},this.classNames={calendar:"",months:"",month:"",caption:"",caption_label:"",nav:"",nav_button:"",nav_button_previous:"",nav_button_next:"",table:"",head_row:"",head_cell:"",row:"",cell:"",day:"",day_range_end:"",day_selected:"",day_today:"",day_outside:"",day_disabled:"",day_range_middle:"",day_hidden:"",...e.classNames},this.components={IconLeft:"&lt;",IconRight:"&gt;",...e.components},this.selected=null,this.focusedDate=null,this.setFocusedDate(),e.selected&&this.setSelectedDate(e.selected),this.monthYearElement=null,this.tableBodyElement=null,this.render(),this.addEventListeners()}render(){this.container.firstChild?this.updateCalendar():this.initialRender()}setFocusedDate(){let t;if(this.selected&&!this.isDisabled(this.selected))t=new Date(this.selected);else{const e=new Date;t=this.isToday(this.date)&&!this.isDisabled(e)?e:new Date(this.date)}if(this.isDisabled(t)||t.getMonth()!==this.date.getMonth()){const e=this.date.getMonth(),s=this.date.getFullYear();for(let i=1;i<=31;i++){const a=new Date(s,e,i);if(a.getMonth()!==e)break;if(!this.isDisabled(a)){t=a;break}}}this.focusedDate=t}initialRender(){const t=this.date.getFullYear(),e=this.date.getMonth(),s=this.getMonthName(e);this.container.innerHTML=`\n        <div class="${this.classNames.calendar}" role="application" aria-label="Calendar">\n          <div class="${this.classNames.months}">\n            <div class="${this.classNames.month}">\n              <div class="${this.classNames.caption}" role="heading" aria-level="1">\n                <button class="${this.classNames.nav_button} ${this.classNames.nav_button_previous}" id="prevMonth" aria-label="Previous month">\n                  ${this.components.IconLeft}\n                </button>\n                <span class="${this.classNames.caption_label}" id="monthYear">${s} ${t}</span>\n                <button class="${this.classNames.nav_button} ${this.classNames.nav_button_next}" id="nextMonth" aria-label="Next month">\n                  ${this.components.IconRight}\n                </button>\n              </div>\n              <table class="${this.classNames.table}" role="grid" aria-labelledby="monthYear">\n                <thead>\n                  <tr class="${this.classNames.head_row}">\n                    ${this.getDayNames().map((t=>`<th class="${this.classNames.head_cell}" scope="col" aria-label="${t}">${t}</th>`)).join("")}\n                  </tr>\n                </thead>\n                <tbody>\n                  ${this.renderCalendarDays()}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n        `,this.monthYearElement=this.container.querySelector("#monthYear"),this.tableBodyElement=this.container.querySelector("tbody")}updateCalendar(){if(!this.monthYearElement||!this.tableBodyElement)return void this.initialRender();const t=this.date.getFullYear(),e=this.date.getMonth(),s=this.getMonthName(e);this.monthYearElement.textContent=`${s} ${t}`,this.tableBodyElement.innerHTML=this.renderCalendarDays()}renderCalendarDays(){const t=this.date.getFullYear(),e=this.date.getMonth();return this.getCalendarDays(t,e).map(((t,e)=>`\n            <tr class="${this.classNames.row}">\n                ${t.map(((t,e)=>`\n                    <td class="${this.classNames.cell}" role="gridcell">\n                        ${t.isEmpty?'<div role="gridcell"></div>':`<button class="${this.getButtonClasses(t)}" \n                                data-date="${t.fullDate?t.fullDate.toISOString():""}" \n                                tabindex="${this.isFocused(t.fullDate)?"0":"-1"}"\n                                aria-label="${this.getAriaLabel(t)}"\n                                aria-pressed="${t.isSelected?"true":"false"}"\n                                ${t.isDisabled?"disabled":""}\n                              >${t.date}</button>`}\n                    </td>\n                `)).join("")}\n            </tr>\n        `)).join("")}addEventListeners(){this.container.querySelector("#prevMonth").addEventListener("click",(()=>this.changeMonth(-1))),this.container.querySelector("#nextMonth").addEventListener("click",(()=>this.changeMonth(1))),this.updateEventListeners()}updateEventListeners(){this.container.querySelectorAll("button[data-date]").forEach((t=>{t.addEventListener("click",(t=>this.onDateSelect(t))),t.addEventListener("keydown",(t=>this.onKeyDown(t))),t.addEventListener("focus",(t=>this.onFocus(t)))}))}onKeyDown(t){const e=t.key,s=t.target,i=new Date(s.getAttribute("data-date"));let a;switch(e){case"ArrowRight":a=new Date(i.setDate(i.getDate()+1));break;case"ArrowLeft":a=new Date(i.setDate(i.getDate()-1));break;case"ArrowUp":a=new Date(i.setDate(i.getDate()-7));break;case"ArrowDown":a=new Date(i.setDate(i.getDate()+7));break;case"Home":a=new Date(i),a.setDate(i.getDate()-i.getDay());break;case"End":a=new Date(i),a.setDate(i.getDate()+(6-i.getDay()));break;case"PageUp":a=t.shiftKey?new Date(i.getFullYear()-1,i.getMonth(),1):new Date(i.getFullYear(),i.getMonth()-1,1),a.setDate(Math.min(i.getDate(),this.getDaysInMonth(a.getFullYear(),a.getMonth())));break;case"PageDown":a=t.shiftKey?new Date(i.getFullYear()+1,i.getMonth(),1):new Date(i.getFullYear(),i.getMonth()+1,1),a.setDate(Math.min(i.getDate(),this.getDaysInMonth(a.getFullYear(),a.getMonth())));break;default:return}t.preventDefault(),this.navigateToDate(a)}getDaysInMonth(t,e){return new Date(t,e+1,0).getDate()}onFocus(t){const e=t.target;this.focusedDate=new Date(e.getAttribute("data-date")),this.updateTabIndex()}navigateToDate(t){const e=this.date.getMonth(),s=this.date.getFullYear();t.getMonth()===e&&t.getFullYear()===s||(this.date=new Date(t),this.updateCalendar(),this.updateEventListeners()),this.focusedDate=t,this.updateTabIndex();const i=this.container.querySelector(`button[data-date="${t.toISOString()}"]`);i&&i.focus()}updateTabIndex(){this.container.querySelectorAll("button[data-date]").forEach((t=>{const e=new Date(t.getAttribute("data-date"));this.isFocused(e)?t.setAttribute("tabindex","0"):t.setAttribute("tabindex","-1")}))}getButtonClasses(t){let e=[this.classNames.day];return t.isToday&&e.push(this.classNames.day_today),t.isOutside&&e.push(this.classNames.day_outside),t.isSelected&&e.push(this.classNames.day_selected),t.isDisabled&&e.push(this.classNames.day_disabled),t.isEmpty&&e.push(this.classNames.day_hidden),e.join(" ")}getAriaLabel(t){const e=t.fullDate;let s=`${this.getDayNames()[e.getDay()]}, ${this.getMonthName(e.getMonth())} ${e.getDate()}, ${e.getFullYear()}`;return t.isToday&&(s+=", Today"),t.isSelected&&(s+=", Selected"),t.isDisabled&&(s+=", Disabled"),s}getMonthName(t){return["January","February","March","April","May","June","July","August","September","October","November","December"][t]}getDayNames(){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}getCalendarDays(t,e){const s=new Date(t,e,1),i=new Date(t,e+1,0).getDate(),a=s.getDay();let n=[],o=[];if(this.options.showOutsideDays)for(let s=a-1;s>=0;s--){const i=new Date(t,e,-s);o.push(this.createDayObject(i,!0))}else for(let t=0;t<a;t++)o.push(this.createEmptyDayObject());for(let s=1;s<=i;s++){const i=new Date(t,e,s);o.push(this.createDayObject(i)),7===o.length&&(n.push(o),o=[])}if(o.length>0){if(this.options.showOutsideDays)for(let s=1;o.length<7;s++){const i=new Date(t,e+1,s);o.push(this.createDayObject(i,!0))}else for(;o.length<7;)o.push(this.createEmptyDayObject());n.push(o)}return n}createEmptyDayObject(){return{date:null,fullDate:null,isOutside:!0,isToday:!1,isSelected:!1,isDisabled:!0,isEmpty:!0}}createDayObject(t,e=!1){return{date:t.getDate(),fullDate:t,isOutside:e,isToday:this.isToday(t),isSelected:this.isSelected(t),isDisabled:this.isDisabled(t)||e}}isToday(t){const e=new Date;return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}isSelected(t){return!!this.selected&&(t.getDate()===this.selected.getDate()&&t.getMonth()===this.selected.getMonth()&&t.getFullYear()===this.selected.getFullYear())}isFocused(t){return this.focusedDate&&t.getDate()===this.focusedDate.getDate()&&t.getMonth()===this.focusedDate.getMonth()&&t.getFullYear()===this.focusedDate.getFullYear()}isDisabled(t){return!1}changeMonth(t){this.date.setMonth(this.date.getMonth()+t),this.setFocusedDate(),this.updateCalendar(),this.updateEventListeners(),this.updateTabIndex()}onDateSelect(t){const e=t.target,s=new Date(e.getAttribute("data-date"));this.isSelected(s)?this.selected=null:this.selected=s,this.focusedDate=s,this.updateTabIndex();this.container.querySelectorAll("button[data-date]").forEach((t=>{const e=new Date(t.getAttribute("data-date"));this.updateButtonClasses(t,e),t.setAttribute("aria-pressed",this.isSelected(e)?"true":"false")})),this.options.onSelect&&this.options.onSelect(this.selected)}updateButtonClasses(t,e){const s=this.createDayObject(e,e.getMonth()!==this.date.getMonth());t.className=this.getButtonClasses(s)}setSelectedDate(t){t instanceof Date&&(this.selected=new Date(t),this.focusedDate=new Date(t),this.date=new Date(t),this.render(),this.addEventListeners())}setClassNames(t){this.classNames={...this.classNames,...t},this.render(),this.addEventListeners()}setComponents(t){this.components={...this.components,...t},this.render(),this.addEventListeners()}setOptions(t){this.options={...this.options,...t},this.render(),this.addEventListeners()}}},Dialog:{selector:"[data-dialog]",Component:e},Tabs:{selector:"[data-tabs]",Component:class{constructor(t){this.root=t,this.tabsList=this.root.querySelector("[data-tabs-list]"),this.tabsTriggers=Array.from(this.root.querySelectorAll("[data-tabs-trigger]")).filter((t=>t.closest("[data-tabs]")===this.root)),this.tabsContents=Array.from(this.root.querySelectorAll("[data-tabs-content]")).filter((t=>t.closest("[data-tabs]")===this.root)),this.orientation=this.root.getAttribute("data-tabs-orientation")||"horizontal",this.setupAccessibility(),this.setupEventListeners(),this.activateTab(this.tabsTriggers[0],!1)}generateId(t){return`${t}-${Math.random().toString(36).slice(2,11)}`}setAriaAttributes(t,e){Object.entries(e).forEach((([e,s])=>t?.setAttribute(e,s)))}setupAccessibility(){this.setAriaAttributes(this.tabsList,{role:"tablist","aria-orientation":this.orientation}),this.tabsTriggers.forEach(((t,e)=>{const s=this.generateId("tab"),i=this.generateId("tabpanel");this.setAriaAttributes(t,{id:s,role:"tab",tabindex:0===e?"0":"-1","aria-selected":0===e?"true":"false","aria-controls":i,"data-state":0===e?"active":""}),this.setAriaAttributes(this.tabsContents[e],{id:i,role:"tabpanel",tabindex:"0","aria-labelledby":s,hidden:0!==e,"data-state":0===e?"active":""})}))}setupEventListeners(){this.tabsTriggers.forEach((t=>{t.addEventListener("click",(()=>this.activateTab(t,!0))),t.addEventListener("keydown",(t=>this.handleKeyDown(t)))}))}activateTab(t,e=!0){this.tabsTriggers.forEach(((e,s)=>{const i=e===t;this.setAriaAttributes(e,{"aria-selected":i.toString(),tabindex:i?"0":"-1","data-state":i?"active":""});const a=this.tabsContents[s];a.hidden=!i,a.setAttribute("data-state",i?"active":"")})),e&&t.focus()}handleKeyDown(t){const e=t.target,s=this.tabsTriggers,i=s.indexOf(e),a="vertical"===this.orientation?{ArrowUp:-1,ArrowDown:1}:{ArrowLeft:-1,ArrowRight:1};if(void 0!==a[t.key]){t.preventDefault();const e=(i+a[t.key]+s.length)%s.length;this.activateTab(s[e],!0)}else"Home"===t.key?(t.preventDefault(),this.activateTab(s[0],!0)):"End"===t.key&&(t.preventDefault(),this.activateTab(s[s.length-1],!0))}}},Popover:{selector:"[data-popover]",Component:class{constructor(t){this.root=t,this.trigger=this.root.querySelector("[data-popover-trigger]"),this.content=this.root.querySelector("[data-popover-content]"),this.setupAccessibility(),this.setupEventListeners(),this.setState("closed"),this.isAnimating=!1}generateId(t){return`${t}-${Math.random().toString(36).slice(2,11)}`}setAriaAttributes(t,e){Object.entries(e).forEach((([e,s])=>t?.setAttribute(e,s)))}setupAccessibility(){const{content:t,trigger:e}=this;this.setAriaAttributes(t,{role:"dialog",id:this.generateId("popover-content")}),this.setAriaAttributes(e,{"aria-haspopup":"dialog","aria-expanded":"false","aria-controls":t.id})}setupEventListeners(){this.trigger?.addEventListener("click",(t=>{t.stopPropagation(),this.toggle()})),document.addEventListener("click",this.handleDocumentClick.bind(this),!0),document.addEventListener("keydown",this.handleGlobalKeyDown.bind(this)),this.trigger.addEventListener("mouseover",(t=>{t.preventDefault(),this.isOpen()&&t.stopPropagation()}))}handleDocumentClick(t){!this.root.contains(t.target)&&this.isOpen()&&this.close()}handleGlobalKeyDown(t){"Escape"===t.key&&this.isOpen()&&(this.close(),this.trigger.focus())}setState(t){this.content.setAttribute("data-state",t)}toggle(){this.isOpen()?this.close():this.open()}open(){if(this.isAnimating)return;document.querySelectorAll('[data-popover-content][data-state="open"]').forEach((t=>{t!==this.content&&t.dispatchEvent(new CustomEvent("closePopover"))})),this.content.classList.remove("hidden"),this.trigger.setAttribute("aria-expanded","true"),this.setState("open");const t=this.getFirstFocusableElement();t&&t.focus();const e=window.getComputedStyle(this.content);if("none"!==e.animationName&&"none"!==e.display){this.isAnimating=!0;const t=()=>{this.isAnimating=!1,this.content.removeEventListener("animationend",t)};this.content.addEventListener("animationend",t)}}close(){if(this.isAnimating)return;this.setState("closed"),this.trigger.setAttribute("aria-expanded","false");const t=window.getComputedStyle(this.content);if("none"!==t.animationName&&"none"!==t.display){this.isAnimating=!0;const t=()=>{this.content.classList.add("hidden"),this.isAnimating=!1,this.content.removeEventListener("animationend",t)};this.content.addEventListener("animationend",t)}else this.content.classList.add("hidden")}isOpen(){return"open"===this.content.getAttribute("data-state")}getFirstFocusableElement(){const t=this.content.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');return t.length>0?t[0]:null}}}};t.initialize=function(){for(const[t,{selector:e,Component:i,options:a={}}]of Object.entries(s)){const s=document.querySelectorAll(e);if(s.length>0)try{s.forEach((t=>new i(t,a))),console.log(`Initialized ${s.length} ${t} component(s)`)}catch(e){console.error(`Failed to initialize ${t} component:`,e)}}},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=index.js.map
