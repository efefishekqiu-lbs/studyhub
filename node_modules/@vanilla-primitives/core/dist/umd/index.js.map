{"version":3,"file":"index.js","sources":["../../src/dialog.js","../../src/index.js","../../src/calendar.js","../../src/tabs.js","../../src/popover.js"],"sourcesContent":["/*\nImplementation Notes for Dialog :\n\n1. Current Approach:\n   - We use the native <dialog> element to align with HTML standards.\n   - Custom open/close methods are implemented to add animation support.\n   - This approach prioritizes standards compliance and future-proofing.\n\n2. Animation Implementation:\n   - Currently overriding the showModal and close methods to handle animations.\n   - While keyframe animations are possible with <dialog>, they don't support animating the backdrop.\n   - Our current method allows us to animate both the dialog and its backdrop.\n\n3. Future Improvement with @starting-style:\n   - Once browser support improves, we plan to transition to the @starting-style at-rule.\n   - Syntax: @starting-style { dialog { opacity: 0; transform: scale(0.5); } }\n   - Animations will work natively with dialog.showModal() and dialog.close(). \n   - Will allow use of native dialog.showModal() and dialog.close() with animations. No more close() and open() methods in here anymore the animations will just work!\n\n4. Why <dialog>:\n   - Using <dialog> ensures long-term compatibility with evolving web standards.\n   - It simplifies maintenance as browsers improve native dialog implementation.\n   - While it presents some animation challenges now, it's a forward-looking choice.\n\n5. Current JavaScript Complexity:\n   - The current implementation requires JavaScript to handle animations and events.\n   - This includes managing animation states, intercepting form events, and custom open/close logic.\n   - @starting-style will allow us to move this logic to CSS, simplifying the JavaScript significantly.\n\nTODO: \n- Monitor browser support for @starting-style and update implementation when widely supported.\n- Plan refactoring to remove custom animation logic and event handling once @starting-style is implemented.\n\nResources:\nhttps://developer.mozilla.org/en-US/docs/Web/HTML/Element/dialog#animating_dialogs\nhttps://developer.mozilla.org/en-US/docs/Web/CSS/@starting-style\n*/\nexport default class Dialog {\n    constructor(element, options = {}) {\n        this.root = element;\n        this.dialog = this.root;\n        this.cancelButton = this.root.querySelector(\"[data-dialog-cancel]\");\n        this.title = this.root.querySelector(\"[data-dialog-title]\");\n        this.description = this.root.querySelector(\"[data-dialog-description]\");\n        this.isAnimating = false;\n        this.options = options;\n\n        this.setupAccessibility();\n        this.setupEventListeners();\n        this.attachCustomMethods();\n    }\n\n    generateId(prefix) {\n        return `${prefix}-${Math.random().toString(36).slice(2, 11)}`;\n    }\n\n    attachCustomMethods() {\n        this.originalCloseModal = this.dialog.close;\n        this.originalShowModal = this.dialog.showModal;\n        this.dialog.close = () => this.close();\n        this.dialog.showModal = () => this.open();\n    }\n\n    setAriaAttributes(element, attrs) {\n        if (element) {\n            Object.entries(attrs).forEach(([key, value]) => element.setAttribute(key, value));\n        }\n    }\n\n    setupAccessibility() {\n        const { dialog, title, description, options } = this;\n\n        this.setAriaAttributes(dialog, {\n            role: options.isAlert ? \"alertdialog\" : \"dialog\",\n            \"aria-modal\": \"true\",\n            \"aria-labelledby\": title ? this.generateId(\"dialog-title\") : \"\",\n            \"aria-describedby\": description ? this.generateId(\"dialog-description\") : \"\"\n        });\n\n        if (title) title.id = dialog.getAttribute(\"aria-labelledby\") || \"\";\n        else console.warn(\"Dialog is missing a title for accessibility.\");\n\n        if (description) description.id = dialog.getAttribute(\"aria-describedby\") || \"\";\n        else console.warn(\"Dialog is missing a description for accessibility.\");\n    }\n\n    setupEventListeners() {\n        this.cancelButton?.addEventListener(\"click\", () => this.close());\n        \n        this.dialog?.addEventListener(\"keydown\", (e) => {\n            if (e.key === \"Escape\") {\n                e.preventDefault();\n                this.close();\n            }\n        });\n\n        // Handle multiple form elements\n        const forms = this.dialog.querySelectorAll('form');\n        forms.forEach(form => {\n            form.addEventListener('submit', (e) => {\n                if (form.method === 'dialog') {\n                    e.preventDefault();\n                    this.close();\n                }\n            });\n        });\n    }\n\n    open() {\n        if (this.isAnimating) return;\n\n        this.originalShowModal.call(this.dialog);\n        this.setAriaAttributes(this.dialog, { \"data-state\": \"open\" });\n        document.body.style.overflow = 'hidden';\n\n        const styles = window.getComputedStyle(this.dialog);\n        const hasEnterAnimation = styles.animationName !== 'none' && styles.display !== 'none';\n\n        if (hasEnterAnimation) {\n            this.isAnimating = true;\n            const handleAnimationEnd = () => {\n                this.isAnimating = false;\n                this.dialog.removeEventListener(\"animationend\", handleAnimationEnd);\n            };\n            this.dialog.addEventListener(\"animationend\", handleAnimationEnd);\n        }\n    }\n\n    close() {\n        if (this.isAnimating) return;\n\n        this.setAriaAttributes(this.dialog, { \"data-state\": \"closed\" });\n        \n        const styles = window.getComputedStyle(this.dialog);\n        const hasExitAnimation = styles.animationName !== 'none' && styles.display !== 'none';\n\n        if (hasExitAnimation) {\n            this.isAnimating = true;\n            const handleAnimationEnd = () => {\n                this.finishClosing();\n                this.isAnimating = false;\n                this.dialog.removeEventListener(\"animationend\", handleAnimationEnd);\n            };\n            this.dialog.addEventListener(\"animationend\", handleAnimationEnd);\n        } else {\n            this.finishClosing();\n        }\n    }\n\n    finishClosing() {\n        this.originalCloseModal.call(this.dialog);\n        document.body.style.overflow = '';\n    }\n}\n","import Calendar from './calendar';\nimport Dialog from './dialog';\nimport Popover from './popover';\nimport Tabs from './tabs';\n\n// Component metadata with correct selectors\nconst componentMeta = {\n  AlertDialog: { selector: '[data-alert-dialog]', Component: Dialog,  options: { isAlert: true } },\n  Calendar: { selector: '[data-calendar]', Component: Calendar },\n  Dialog: { selector: '[data-dialog]', Component: Dialog },\n  Tabs: { selector: '[data-tabs]', Component: Tabs },\n  Popover: { selector: '[data-popover]', Component: Popover },\n};\n\n// Function to detect and initialize components on the page\nexport function initialize() {\n  for (const [name, { selector, Component, options = {} }] of Object.entries(componentMeta)) {\n      const elements = document.querySelectorAll(selector);\n      if (elements.length > 0) {\n          try {\n              elements.forEach(el => new Component(el, options));\n              console.log(`Initialized ${elements.length} ${name} component(s)`);\n          } catch (error) {\n              console.error(`Failed to initialize ${name} component:`, error);\n          }\n      }\n  }\n}\n","export default class Calendar {\n    constructor(container, options = {}) {\n        this.container = container;\n        this.date = new Date();\n        this.options = {\n            showOutsideDays: true,\n            ...options\n        };\n        this.classNames = {\n            calendar: \"\",\n            months: \"\",\n            month: \"\",\n            caption: \"\",\n            caption_label: \"\",\n            nav: \"\",\n            nav_button: \"\",\n            nav_button_previous: \"\",\n            nav_button_next: \"\",\n            table: \"\",\n            head_row: \"\",\n            head_cell: \"\",\n            row: \"\",\n            cell: \"\",\n            day: \"\",\n            day_range_end: \"\",\n            day_selected: \"\",\n            day_today: \"\",\n            day_outside: \"\",\n            day_disabled: \"\",\n            day_range_middle: \"\",\n            day_hidden: \"\",\n            ...options.classNames\n        };\n        this.components = {\n            IconLeft: '&lt;',\n            IconRight: '&gt;',\n            ...options.components\n        };\n        this.selected = null;\n        this.focusedDate = null;\n        this.setFocusedDate(); // Set initial focused date\n        if (options.selected) {\n            this.setSelectedDate(options.selected);\n        }\n        this.monthYearElement = null;\n        this.tableBodyElement = null;\n        this.render();\n        this.addEventListeners();\n    }\n\n    render() {\n        if (!this.container.firstChild) {\n            this.initialRender();\n        } else {\n            this.updateCalendar();\n        }\n    }\n\n    setFocusedDate() {\n        let potentialFocusDate;\n\n        if (this.selected && !this.isDisabled(this.selected)) {\n            potentialFocusDate = new Date(this.selected);\n        } else {\n            const today = new Date();\n            if (this.isToday(this.date) && !this.isDisabled(today)) {\n                potentialFocusDate = today;\n            } else {\n                potentialFocusDate = new Date(this.date);\n            }\n        }\n\n        // If the potential focus date is disabled or outside the current month, find the first available date\n        if (this.isDisabled(potentialFocusDate) || potentialFocusDate.getMonth() !== this.date.getMonth()) {\n            const currentMonth = this.date.getMonth();\n            const currentYear = this.date.getFullYear();\n\n            // Check all days in the current month\n            for (let i = 1; i <= 31; i++) {\n                const checkDate = new Date(currentYear, currentMonth, i);\n                if (checkDate.getMonth() !== currentMonth) break; // Stop if we've moved to the next month\n                if (!this.isDisabled(checkDate)) {\n                    potentialFocusDate = checkDate;\n                    break;\n                }\n            }\n        }\n\n        this.focusedDate = potentialFocusDate;\n    }\n    initialRender() {\n        const year = this.date.getFullYear();\n        const month = this.date.getMonth();\n        const monthName = this.getMonthName(month);\n\n        this.container.innerHTML = `\n        <div class=\"${this.classNames.calendar}\" role=\"application\" aria-label=\"Calendar\">\n          <div class=\"${this.classNames.months}\">\n            <div class=\"${this.classNames.month}\">\n              <div class=\"${this.classNames.caption}\" role=\"heading\" aria-level=\"1\">\n                <button class=\"${this.classNames.nav_button} ${this.classNames.nav_button_previous}\" id=\"prevMonth\" aria-label=\"Previous month\">\n                  ${this.components.IconLeft}\n                </button>\n                <span class=\"${this.classNames.caption_label}\" id=\"monthYear\">${monthName} ${year}</span>\n                <button class=\"${this.classNames.nav_button} ${this.classNames.nav_button_next}\" id=\"nextMonth\" aria-label=\"Next month\">\n                  ${this.components.IconRight}\n                </button>\n              </div>\n              <table class=\"${this.classNames.table}\" role=\"grid\" aria-labelledby=\"monthYear\">\n                <thead>\n                  <tr class=\"${this.classNames.head_row}\">\n                    ${this.getDayNames().map(day => `<th class=\"${this.classNames.head_cell}\" scope=\"col\" aria-label=\"${day}\">${day}</th>`).join('')}\n                  </tr>\n                </thead>\n                <tbody>\n                  ${this.renderCalendarDays()}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n        `;\n\n        this.monthYearElement = this.container.querySelector('#monthYear');\n        this.tableBodyElement = this.container.querySelector('tbody');\n    }\n\n    updateCalendar() {\n        if (!this.monthYearElement || !this.tableBodyElement) {\n            this.initialRender();\n            return;\n        }\n\n        const year = this.date.getFullYear();\n        const month = this.date.getMonth();\n        const monthName = this.getMonthName(month);\n\n        this.monthYearElement.textContent = `${monthName} ${year}`;\n        this.tableBodyElement.innerHTML = this.renderCalendarDays();\n    }\n\n    renderCalendarDays() {\n        const year = this.date.getFullYear();\n        const month = this.date.getMonth();\n        return this.getCalendarDays(year, month).map((week, weekIndex) => `\n            <tr class=\"${this.classNames.row}\">\n                ${week.map((day, dayIndex) => `\n                    <td class=\"${this.classNames.cell}\" role=\"gridcell\">\n                        ${day.isEmpty\n                ? `<div role=\"gridcell\"></div>`\n                : `<button class=\"${this.getButtonClasses(day)}\" \n                                data-date=\"${day.fullDate ? day.fullDate.toISOString() : ''}\" \n                                tabindex=\"${this.isFocused(day.fullDate) ? '0' : '-1'}\"\n                                aria-label=\"${this.getAriaLabel(day)}\"\n                                aria-pressed=\"${day.isSelected ? 'true' : 'false'}\"\n                                ${day.isDisabled ? 'disabled' : ''}\n                              >${day.date}</button>`\n            }\n                    </td>\n                `).join('')}\n            </tr>\n        `).join('');\n    }\n\n    addEventListeners() {\n        this.container.querySelector('#prevMonth').addEventListener('click', () => this.changeMonth(-1));\n        this.container.querySelector('#nextMonth').addEventListener('click', () => this.changeMonth(1));\n        this.updateEventListeners();\n    }\n\n    updateEventListeners() {\n        const dateButtons = this.container.querySelectorAll('button[data-date]');\n        dateButtons.forEach(button => {\n            button.addEventListener('click', (e) => this.onDateSelect(e));\n            button.addEventListener('keydown', (e) => this.onKeyDown(e));\n            button.addEventListener('focus', (e) => this.onFocus(e));\n        });\n    }\n\n    onKeyDown(event) {\n        const key = event.key;\n        const currentButton = event.target;\n        const currentDate = new Date(currentButton.getAttribute('data-date'));\n\n        let newDate;\n        switch (key) {\n            case 'ArrowRight':\n                newDate = new Date(currentDate.setDate(currentDate.getDate() + 1));\n                break;\n            case 'ArrowLeft':\n                newDate = new Date(currentDate.setDate(currentDate.getDate() - 1));\n                break;\n            case 'ArrowUp':\n                newDate = new Date(currentDate.setDate(currentDate.getDate() - 7));\n                break;\n            case 'ArrowDown':\n                newDate = new Date(currentDate.setDate(currentDate.getDate() + 7));\n                break;\n            case 'Home':\n                // Set to the first day (Sunday) of the current week\n                newDate = new Date(currentDate);\n                newDate.setDate(currentDate.getDate() - currentDate.getDay());\n                break;\n            case 'End':\n                // Set to the last day (Saturday) of the current week\n                newDate = new Date(currentDate);\n                newDate.setDate(currentDate.getDate() + (6 - currentDate.getDay()));\n                break;\n            case 'PageUp':\n                if (event.shiftKey) {\n                    newDate = new Date(currentDate.getFullYear() - 1, currentDate.getMonth(), 1);\n                } else {\n                    newDate = new Date(currentDate.getFullYear(), currentDate.getMonth() - 1, 1);\n                }\n                newDate.setDate(Math.min(currentDate.getDate(), this.getDaysInMonth(newDate.getFullYear(), newDate.getMonth())));\n                break;\n            case 'PageDown':\n                if (event.shiftKey) {\n                    newDate = new Date(currentDate.getFullYear() + 1, currentDate.getMonth(), 1);\n                } else {\n                    newDate = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 1);\n                }\n                newDate.setDate(Math.min(currentDate.getDate(), this.getDaysInMonth(newDate.getFullYear(), newDate.getMonth())));\n                break;\n            default:\n                return; // Exit for other keys\n        }\n\n        event.preventDefault();\n        this.navigateToDate(newDate);\n    }\n    getDaysInMonth(year, month) {\n        return new Date(year, month + 1, 0).getDate();\n    }\n    onFocus(event) {\n        const button = event.target;\n        this.focusedDate = new Date(button.getAttribute('data-date'));\n        this.updateTabIndex();\n    }\n\n    navigateToDate(date) {\n        const currentMonth = this.date.getMonth();\n        const currentYear = this.date.getFullYear();\n\n        if (date.getMonth() !== currentMonth || date.getFullYear() !== currentYear) {\n            this.date = new Date(date);\n            this.updateCalendar();\n            this.updateEventListeners();\n        }\n\n        this.focusedDate = date;\n        this.updateTabIndex();\n\n        const newButton = this.container.querySelector(`button[data-date=\"${date.toISOString()}\"]`);\n        if (newButton) {\n            newButton.focus();\n        }\n    }\n\n    updateTabIndex() {\n        const dateButtons = this.container.querySelectorAll('button[data-date]');\n\n        dateButtons.forEach(btn => {\n            const btnDate = new Date(btn.getAttribute('data-date'));\n            if (this.isFocused(btnDate)) {\n                btn.setAttribute('tabindex', '0');\n            } else {\n                btn.setAttribute('tabindex', '-1');\n            }\n        });\n    }\n\n    getButtonClasses(day) {\n        let classes = [this.classNames.day];\n        if (day.isToday) classes.push(this.classNames.day_today);\n        if (day.isOutside) classes.push(this.classNames.day_outside);\n        if (day.isSelected) classes.push(this.classNames.day_selected);\n        if (day.isDisabled) classes.push(this.classNames.day_disabled);\n        if (day.isEmpty) classes.push(this.classNames.day_hidden);\n        return classes.join(' ');\n    }\n\n    getAriaLabel(day) {\n        const date = day.fullDate;\n        const dayName = this.getDayNames()[date.getDay()];\n        const monthName = this.getMonthName(date.getMonth());\n        let label = `${dayName}, ${monthName} ${date.getDate()}, ${date.getFullYear()}`;\n        if (day.isToday) label += ', Today';\n        if (day.isSelected) label += ', Selected';\n        if (day.isDisabled) label += ', Disabled';\n        return label;\n    }\n\n    getMonthName(month) {\n        const monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\n            \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\n        ];\n        return monthNames[month];\n    }\n\n    getDayNames() {\n        return ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n    }\n\n    getCalendarDays(year, month) {\n        const firstDay = new Date(year, month, 1);\n        const lastDay = new Date(year, month + 1, 0);\n        const daysInMonth = lastDay.getDate();\n        const startingDay = firstDay.getDay();\n\n        let days = [];\n        let week = [];\n\n        // Previous month's days\n        if (this.options.showOutsideDays) {\n            for (let i = startingDay - 1; i >= 0; i--) {\n                const date = new Date(year, month, -i);\n                week.push(this.createDayObject(date, true));\n            }\n        } else {\n            // Add empty cells for the start of the month\n            for (let i = 0; i < startingDay; i++) {\n                week.push(this.createEmptyDayObject());\n            }\n        }\n\n        // Current month's days\n        for (let i = 1; i <= daysInMonth; i++) {\n            const date = new Date(year, month, i);\n            week.push(this.createDayObject(date));\n            if (week.length === 7) {\n                days.push(week);\n                week = [];\n            }\n        }\n\n        // Next month's days or empty cells\n        if (week.length > 0) {\n            if (this.options.showOutsideDays) {\n                for (let i = 1; week.length < 7; i++) {\n                    const date = new Date(year, month + 1, i);\n                    week.push(this.createDayObject(date, true));\n                }\n            } else {\n                // Add empty cells for the end of the month\n                while (week.length < 7) {\n                    week.push(this.createEmptyDayObject());\n                }\n            }\n            days.push(week);\n        }\n\n        return days;\n    }\n\n    createEmptyDayObject() {\n        return {\n            date: null,\n            fullDate: null,\n            isOutside: true,\n            isToday: false,\n            isSelected: false,\n            isDisabled: true,\n            isEmpty: true\n        };\n    }\n\n    createDayObject(date, isOutside = false) {\n        return {\n            date: date.getDate(),\n            fullDate: date,\n            isOutside,\n            isToday: this.isToday(date),\n            isSelected: this.isSelected(date),\n            isDisabled: this.isDisabled(date) || isOutside\n        };\n    }\n\n    isToday(date) {\n        const today = new Date();\n        return date.getDate() === today.getDate() &&\n            date.getMonth() === today.getMonth() &&\n            date.getFullYear() === today.getFullYear();\n    }\n\n    isSelected(date) {\n        if (!this.selected) return false;\n        return date.getDate() === this.selected.getDate() &&\n            date.getMonth() === this.selected.getMonth() &&\n            date.getFullYear() === this.selected.getFullYear();\n    }\n\n    isFocused(date) {\n        return this.focusedDate &&\n            date.getDate() === this.focusedDate.getDate() &&\n            date.getMonth() === this.focusedDate.getMonth() &&\n            date.getFullYear() === this.focusedDate.getFullYear();\n    }\n\n    isDisabled(date) {\n        // Implement your own logic for disabled dates\n        return false;\n    }\n\n    changeMonth(delta) {\n        this.date.setMonth(this.date.getMonth() + delta);\n        this.setFocusedDate(); // Update focused date when changing months\n        this.updateCalendar();\n        this.updateEventListeners();\n\n        // Update tab index for the new month without focusing\n        this.updateTabIndex();\n    }\n\n    onDateSelect(event) {\n        const button = event.target;\n        const clickedDate = new Date(button.getAttribute('data-date'));\n\n        // Toggle selection\n        if (this.isSelected(clickedDate)) {\n            this.selected = null;\n        } else {\n            this.selected = clickedDate;\n        }\n\n        this.focusedDate = clickedDate;\n        this.updateTabIndex();\n\n        // Update all day buttons\n        const dateButtons = this.container.querySelectorAll('button[data-date]');\n        dateButtons.forEach(btn => {\n            const btnDate = new Date(btn.getAttribute('data-date'));\n            this.updateButtonClasses(btn, btnDate);\n            btn.setAttribute('aria-pressed', this.isSelected(btnDate) ? 'true' : 'false');\n        });\n\n        if (this.options.onSelect) {\n            this.options.onSelect(this.selected);\n        }\n    }\n\n    updateButtonClasses(button, date) {\n        const dayObject = this.createDayObject(date, date.getMonth() !== this.date.getMonth());\n        button.className = this.getButtonClasses(dayObject);\n    }\n\n    setSelectedDate(date) {\n        if (date instanceof Date) {\n            this.selected = new Date(date);\n            this.focusedDate = new Date(date);\n            this.date = new Date(date);  // Update the current month view to the selected date\n            this.render();\n            this.addEventListeners();\n        }\n    }\n\n    // Public methods for customization\n    setClassNames(newClassNames) {\n        this.classNames = { ...this.classNames, ...newClassNames };\n        this.render();\n        this.addEventListeners();\n    }\n\n    setComponents(newComponents) {\n        this.components = { ...this.components, ...newComponents };\n        this.render();\n        this.addEventListeners();\n    }\n\n    setOptions(newOptions) {\n        this.options = { ...this.options, ...newOptions };\n        this.render();\n        this.addEventListeners();\n    }\n}","export default class Tabs {\n    constructor(element) {\n        this.root = element;\n        this.tabsList = this.root.querySelector('[data-tabs-list]');\n        this.tabsTriggers = Array.from(this.root.querySelectorAll('[data-tabs-trigger]'))\n            .filter(trigger => trigger.closest('[data-tabs]') === this.root);\n        this.tabsContents = Array.from(this.root.querySelectorAll('[data-tabs-content]'))\n            .filter(content => content.closest('[data-tabs]') === this.root);\n        this.orientation = this.root.getAttribute('data-tabs-orientation') || 'horizontal';\n        this.setupAccessibility();\n        this.setupEventListeners();\n        this.activateTab(this.tabsTriggers[0], false);\n    }\n\n    generateId(prefix) {\n        return `${prefix}-${Math.random().toString(36).slice(2, 11)}`;\n    }\n\n    setAriaAttributes(element, attrs) {\n        Object.entries(attrs).forEach(([key, value]) => element?.setAttribute(key, value));\n    }\n\n    setupAccessibility() {\n        this.setAriaAttributes(this.tabsList, {\n            role: 'tablist',\n            'aria-orientation': this.orientation\n        });\n\n        this.tabsTriggers.forEach((trigger, index) => {\n            const id = this.generateId('tab');\n            const panelId = this.generateId('tabpanel');\n\n            this.setAriaAttributes(trigger, {\n                id,\n                role: 'tab',\n                tabindex: index === 0 ? '0' : '-1',\n                'aria-selected': index === 0 ? 'true' : 'false',\n                'aria-controls': panelId,\n                'data-state': index === 0 ? 'active' : ''\n            });\n\n            this.setAriaAttributes(this.tabsContents[index], {\n                id: panelId,\n                role: 'tabpanel',\n                tabindex: '0',\n                'aria-labelledby': id,\n                hidden: index !== 0,\n                'data-state': index === 0 ? 'active' : ''\n            });\n        });\n    }\n\n    setupEventListeners() {\n        this.tabsTriggers.forEach(trigger => {\n            trigger.addEventListener('click', () => this.activateTab(trigger, true));\n            trigger.addEventListener('keydown', (e) => this.handleKeyDown(e));\n        });\n    }\n\n    activateTab(tab, shouldFocus = true) {\n        this.tabsTriggers.forEach((t, index) => {\n            const isActive = t === tab;\n            this.setAriaAttributes(t, {\n                'aria-selected': isActive.toString(),\n                'tabindex': isActive ? '0' : '-1',\n                'data-state': isActive ? 'active' : ''\n            });\n\n            const panel = this.tabsContents[index];\n            panel.hidden = !isActive;\n            panel.setAttribute('data-state', isActive ? 'active' : '');\n        });\n\n        if (shouldFocus) {\n            tab.focus();\n        }\n    }\n\n    handleKeyDown(event) {\n        const trigger = event.target;\n        const triggerList = this.tabsTriggers;\n        const index = triggerList.indexOf(trigger);\n\n        const dir = this.orientation === 'vertical' ? {\n            ArrowUp: -1,\n            ArrowDown: 1\n        } : {\n            ArrowLeft: -1,\n            ArrowRight: 1\n        };\n\n        if (dir[event.key] !== undefined) {\n            event.preventDefault();\n            const newIndex = (index + dir[event.key] + triggerList.length) % triggerList.length;\n            this.activateTab(triggerList[newIndex], true);\n        } else if (event.key === 'Home') {\n            event.preventDefault();\n            this.activateTab(triggerList[0], true);\n        } else if (event.key === 'End') {\n            event.preventDefault();\n            this.activateTab(triggerList[triggerList.length - 1], true);\n        }\n    }\n}","export default class Popover {\n    constructor(element) {\n        this.root = element;\n        this.trigger = this.root.querySelector(\"[data-popover-trigger]\");\n        this.content = this.root.querySelector(\"[data-popover-content]\");\n\n        this.setupAccessibility();\n        this.setupEventListeners();\n        this.setState(\"closed\"); // Initialize the state\n        this.isAnimating = false; // Flag to track animation state\n    }\n\n    generateId(prefix) {\n        return `${prefix}-${Math.random().toString(36).slice(2, 11)}`;\n    }\n\n    setAriaAttributes(element, attrs) {\n        Object.entries(attrs).forEach(([key, value]) => element?.setAttribute(key, value));\n    }\n\n    setupAccessibility() {\n        const { content, trigger } = this;\n\n        this.setAriaAttributes(content, {\n            role: \"dialog\",\n            id: this.generateId(\"popover-content\")\n        });\n\n        this.setAriaAttributes(trigger, {\n            \"aria-haspopup\": \"dialog\",\n            \"aria-expanded\": \"false\",\n            \"aria-controls\": content.id\n        });\n    }\n\n    setupEventListeners() {\n        this.trigger?.addEventListener(\"click\", (e) => {\n            e.stopPropagation();\n            this.toggle();\n        });\n        \n        // Use capturing for the document click listener\n        document.addEventListener(\"click\", this.handleDocumentClick.bind(this), true);\n\n        // Add global keydown event listener for Escape key\n        document.addEventListener(\"keydown\", this.handleGlobalKeyDown.bind(this));\n\n        // Prevent focus on trigger when hovering\n        this.trigger.addEventListener(\"mouseover\", (e) => {\n            e.preventDefault();\n            if (this.isOpen()) {\n                e.stopPropagation();\n            }\n        });\n    }\n\n    handleDocumentClick(e) {\n        // Check if the click is outside both the trigger and the content\n        if (!this.root.contains(e.target) && this.isOpen()) {\n            this.close();\n        }\n    }\n\n    handleGlobalKeyDown(e) {\n        if (e.key === \"Escape\" && this.isOpen()) {\n            this.close();\n            this.trigger.focus();\n        }\n    }\n\n    setState(state) {\n        this.content.setAttribute(\"data-state\", state);\n    }\n\n    toggle() {\n        this.isOpen() ? this.close() : this.open();\n    }\n\n    open() {\n        if (this.isAnimating) return; // Prevent opening if animation is already in progress\n\n        // Close all other open popovers first\n        document.querySelectorAll('[data-popover-content][data-state=\"open\"]').forEach(openPopover => {\n            if (openPopover !== this.content) {\n                openPopover.dispatchEvent(new CustomEvent('closePopover'));\n            }\n        });\n\n        this.content.classList.remove(\"hidden\");\n        this.trigger.setAttribute(\"aria-expanded\", \"true\");\n        this.setState(\"open\");\n\n        // Focus the first focusable element immediately after opening\n        const firstFocusableElement = this.getFirstFocusableElement();\n        if (firstFocusableElement) {\n            firstFocusableElement.focus();\n        }\n\n        const styles = window.getComputedStyle(this.content);\n        const hasEnterAnimation = styles.animationName !== 'none' && styles.display !== 'none';\n\n        if (hasEnterAnimation) {\n            this.isAnimating = true;\n            const handleAnimationEnd = () => {\n                this.isAnimating = false;\n                this.content.removeEventListener(\"animationend\", handleAnimationEnd);\n            };\n\n            this.content.addEventListener(\"animationend\", handleAnimationEnd);\n        }\n        // If there's no animation, we don't set isAnimating to true\n    }\n\n    close() {\n        if (this.isAnimating) return; // Prevent closing if animation is already in progress\n\n        this.setState(\"closed\");\n        this.trigger.setAttribute(\"aria-expanded\", \"false\");\n        \n        const styles = window.getComputedStyle(this.content);\n        const hasExitAnimation = styles.animationName !== 'none' && styles.display !== 'none';\n        if (hasExitAnimation) {\n            this.isAnimating = true; // Set isAnimating only if there's an animation\n            const handleAnimationEnd = () => {\n                this.content.classList.add(\"hidden\");\n                this.isAnimating = false;\n                this.content.removeEventListener(\"animationend\", handleAnimationEnd);\n            };\n            \n            this.content.addEventListener(\"animationend\", handleAnimationEnd);\n        } else {\n            // If there's no animation, immediately hide the content\n            this.content.classList.add(\"hidden\");\n            // We don't set isAnimating to true here since there's no animation\n        }\n    }\n\n\n    isOpen() {\n        return this.content.getAttribute(\"data-state\") === \"open\";\n    }\n\n    getFirstFocusableElement() {\n        const focusableElements = this.content.querySelectorAll(\n            'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n        );\n        return focusableElements.length > 0 ? focusableElements[0] : null;\n    }\n}"],"names":["Dialog","constructor","element","options","this","root","dialog","cancelButton","querySelector","title","description","isAnimating","setupAccessibility","setupEventListeners","attachCustomMethods","generateId","prefix","Math","random","toString","slice","originalCloseModal","close","originalShowModal","showModal","open","setAriaAttributes","attrs","Object","entries","forEach","key","value","setAttribute","role","isAlert","id","getAttribute","console","warn","addEventListener","e","preventDefault","querySelectorAll","form","method","call","document","body","style","overflow","styles","window","getComputedStyle","animationName","display","handleAnimationEnd","removeEventListener","finishClosing","componentMeta","AlertDialog","selector","Component","Calendar","container","date","Date","showOutsideDays","classNames","calendar","months","month","caption","caption_label","nav","nav_button","nav_button_previous","nav_button_next","table","head_row","head_cell","row","cell","day","day_range_end","day_selected","day_today","day_outside","day_disabled","day_range_middle","day_hidden","components","IconLeft","IconRight","selected","focusedDate","setFocusedDate","setSelectedDate","monthYearElement","tableBodyElement","render","addEventListeners","firstChild","updateCalendar","initialRender","potentialFocusDate","isDisabled","today","isToday","getMonth","currentMonth","currentYear","getFullYear","i","checkDate","year","monthName","getMonthName","innerHTML","getDayNames","map","join","renderCalendarDays","textContent","getCalendarDays","week","weekIndex","dayIndex","isEmpty","getButtonClasses","fullDate","toISOString","isFocused","getAriaLabel","isSelected","changeMonth","updateEventListeners","button","onDateSelect","onKeyDown","onFocus","event","currentButton","target","currentDate","newDate","setDate","getDate","getDay","shiftKey","min","getDaysInMonth","navigateToDate","updateTabIndex","newButton","focus","btn","btnDate","classes","push","isOutside","label","firstDay","daysInMonth","startingDay","days","createDayObject","createEmptyDayObject","length","delta","setMonth","clickedDate","updateButtonClasses","onSelect","dayObject","className","setClassNames","newClassNames","setComponents","newComponents","setOptions","newOptions","Tabs","tabsList","tabsTriggers","Array","from","filter","trigger","closest","tabsContents","content","orientation","activateTab","index","panelId","tabindex","hidden","handleKeyDown","tab","shouldFocus","t","isActive","panel","triggerList","indexOf","dir","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","undefined","newIndex","Popover","setState","stopPropagation","toggle","handleDocumentClick","bind","handleGlobalKeyDown","isOpen","contains","state","openPopover","dispatchEvent","CustomEvent","classList","remove","firstFocusableElement","getFirstFocusableElement","add","focusableElements","name","elements","el","log","error"],"mappings":"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"}